{{ define "administration/master_data/department" }}
<style>
  /* Premium Table Styling */
  #table-department {
    border-collapse: separate !important;
    border-spacing: 0 !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 10px !important;
    overflow: hidden !important;
  }

  #table-department thead th {
    background-color: #f8f9fa;
    border-bottom: 2px solid #0d6efd !important;
    font-weight: 600;
    color: #333;
    padding: 12px;
  }

  #table-department tbody td {
    border: 1px solid #dee2e6 !important;
    padding: 12px;
    vertical-align: middle;
  }

  #table-department tbody tr:hover {
    background-color: #f1f7ff;
    transition: background-color 0.2s;
  }
</style>

<div class="app-content-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-6"><h3 class="mb-0">{{ .title }}</h3></div>
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-end">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active">Master Bagian</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<div class="app-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-4">
        <div class="card card-primary card-outline">
          <div class="card-header">
            <h3 class="card-title">{{ if .department }}Edit Bagian{{ else }}Tambah Bagian{{ end }}</h3>
          </div>
          <form action="{{ if .department }}/administration/master-data/department/update/{{ .department.ID }}{{ else }}/administration/master-data/department/store{{ end }}" method="POST">
            <div class="card-body">
              <div class="mb-3">
                <label for="master_branch_id" class="form-label">Cabang</label>
                <select name="master_branch_id" class="form-select" id="master_branch_id" required>
                  <option value="">-- Pilih Cabang --</option>
                  {{ range $branch := .branches }}
                  <option value="{{ $branch.ID }}" {{ if $.department }}{{ if eq $.department.MasterBranchID $branch.ID }}selected{{ end }}{{ end }}>{{ $branch.Name }}</option>
                  {{ end }}
                </select>
              </div>
              <div class="mb-3">
                <label for="name" class="form-label">Nama Bagian</label>
                <input type="text" name="name" class="form-control" id="name" placeholder="Masukkan nama bagian" value="{{ if .department }}{{ .department.Name }}{{ end }}" required>
              </div>
            </div>
            <div class="card-footer">
              <button type="submit" class="btn btn-primary">Simpan</button>
              {{ if .department }}
              <a href="/administration/master-data/department" class="btn btn-secondary">Batal</a>
              {{ end }}
            </div>
          </form>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Daftar Bagian</h3>
          </div>
          <div class="card-body">
            <table class="table table-bordered" id="table-department">
              <thead>
                <tr>
                  <th style="width: 50px">No</th>
                  <th>Cabang</th>
                  <th>Nama Bagian</th>
                  <th style="width: 100px">Aksi</th>
                </tr>
              </thead>
              <tbody>
                {{ range $index, $dept := .departments }}
                <tr>
                  <td>{{ add $index 1 }}.</td>
                  <td><span class="badge text-bg-light border">{{ $dept.MasterBranch.Name }}</span></td>
                  <td><strong>{{ $dept.Name }}</strong></td>
                  <td>
                    <div class="btn-group">
                      <a href="/administration/master-data/department/edit/{{ $dept.ID }}" class="btn btn-warning btn-sm">
                        <i class="bi bi-pencil"></i>
                      </a>
                      <a href="/administration/master-data/department/delete/{{ $dept.ID }}" class="btn btn-danger btn-sm" onclick="return confirm('Hapus data ini?')">
                        <i class="bi bi-trash"></i>
                      </a>
                    </div>
                  </td>
                </tr>
                {{ end }}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{{ end }}
