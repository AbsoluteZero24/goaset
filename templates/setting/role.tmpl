{{ define "setting/role" }}
<div class="app-content-header">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-6">
                <h3 class="mb-0">{{ .title }}</h3>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-end">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Role Setting</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class="app-content">
    <div class="container-fluid">
        <div class="row">
            {{ range $roleIdx, $roleData := .roles }}
            <div class="col-md-6">
                <div class="card card-outline {{ if eq $roleData.Role "super_admin" }}card-primary{{ else }}card-info{{ end }} shadow-sm">
                    <div class="card-header border-0 pb-0">
                        <h3 class="card-title text-capitalize fw-bold">
                            <i class="bi {{ if eq $roleData.Role "super_admin" }}bi-shield-lock{{ else }}bi-person-badge{{ end }} me-2"></i>
                            Role: {{ $roleData.Role }}
                        </h3>
                    </div>
                    <form action="/setting/role/update" method="post">
                        <input type="hidden" name="role" value="{{ $roleData.Role }}">
                        <div class="card-body">
                            <div class="alert {{ if eq $roleData.Role "super_admin" }}alert-primary{{ else }}alert-info{{ end }} py-2 px-3 mb-4 rounded-3 border-0">
                                <small class="d-block">
                                    {{ if eq $roleData.Role "super_admin" }}
                                    <i class="bi bi-info-circle-fill me-1"></i> Super Admin memiliki akses penuh ke seluruh sistem secara default.
                                    {{ else }}
                                    <i class="bi bi-info-circle-fill me-1"></i> Atur akses menu untuk role Asset Manager di bawah ini.
                                    {{ end }}
                                </small>
                            </div>
                            
                            <div class="list-group list-group-flush border rounded-3 overflow-hidden">
                                {{ range $resIdx, $res := $.resources }}
                                <div class="list-group-item d-flex justify-content-between align-items-center py-3">
                                    <div>
                                        <h6 class="mb-0 text-capitalize">Modul {{ $res }}</h6>
                                        <small class="text-muted">Izin akses untuk halaman {{ $res }}</small>
                                    </div>
                                    <div class="form-check form-switch fs-5">
                                        <input class="form-check-input" type="checkbox" role="switch" 
                                            id="perm_{{ $roleData.Role }}_{{ $res }}" 
                                            name="perm_{{ $res }}"
                                            {{ if index $roleData.Permissions $res }}checked{{ end }}
                                            {{ if eq $roleData.Role "super_admin" }}disabled{{ end }}>
                                    </div>
                                </div>
                                {{ end }}
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-0 pt-0 pb-4">
                            {{ if ne $roleData.Role "super_admin" }}
                            <button type="submit" class="btn btn-primary w-100 py-2 fw-semibold shadow-sm">
                                <i class="bi bi-save me-1"></i> Simpan Perubahan
                            </button>
                            {{ else }}
                            <div class="text-center">
                                <span class="badge text-bg-secondary bg-opacity-10 text-secondary border px-3 py-2 small">
                                    <i class="bi bi-lock-fill me-1"></i> Super Admin permissions are permanent
                                </span>
                            </div>
                            {{ end }}
                        </div>
                    </form>
                </div>
            </div>
            {{ end }}
        </div>
    </div>
</div>
{{ end }}
